import{j as k,E as x,r as v,z as h,K as y,c as V,a as e,b as u,s as r,v as d,m as o,t as C,L as U,x as M,d as p,w as _,q as A,e as I,M as N,o as T,_ as B}from"./Dv50Am8a.js";const j={class:"register"},z={class:"auth-card"},D={class:"auth-form"},E={class:"form-group"},L={class:"form-group"},O={class:"form-group"},S={class:"form-group"},$={class:"captcha-wrapper"},q=["disabled"],F={class:"terms-group"},J={for:"terms"},K={class:"auth-links"},P=k({__name:"register",setup(R){const s=x({nickname:"",email:"",password:"",captcha:""}),i=v(!1),n=v(0);let l=null;const f=h(()=>n.value>0?`${n.value}s`:"获取验证码"),b=()=>{n.value=60,l=window.setInterval(()=>{n.value--,n.value<=0&&l&&(clearInterval(l),l=null)},1e3)},g=async()=>{if(!Object.values(s).every(t=>t.trim()!=="")||!i.value)return alert("请填写完整信息或勾上同意条款");const{error:c}=await A("/api/public/register",{method:"POST",body:{nickname:s.nickname,email:s.email,password:s.password,captcha:s.captcha}},"$vZYnzyJ53M");if(c.value){alert("注册失败，请稍后再试!");return}alert("注册成功，请登录")};return y(()=>{l&&(clearInterval(l),l=null)}),(c,t)=>{const m=I,w=N("AppArticle");return T(),V("div",j,[e("div",z,[e("div",D,[t[12]||(t[12]=e("h3",null,"注册",-1)),e("div",E,[t[5]||(t[5]=e("label",null,"昵称",-1)),r(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>o(s).nickname=a),placeholder:"请输入您的昵称"},null,512),[[d,o(s).nickname,void 0,{trim:!0}]])]),e("div",L,[t[6]||(t[6]=e("label",null,"邮箱",-1)),r(e("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=a=>o(s).email=a),placeholder:"请输入您的邮箱"},null,512),[[d,o(s).email,void 0,{trim:!0}]])]),e("div",O,[t[7]||(t[7]=e("label",null,"密码",-1)),r(e("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=a=>o(s).password=a),placeholder:"请输入密码（至少6位）"},null,512),[[d,o(s).password]])]),e("div",S,[t[8]||(t[8]=e("label",null,"验证码",-1)),e("div",$,[r(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>o(s).captcha=a),placeholder:"请输入验证码",class:"captcha-input"},null,512),[[d,o(s).captcha,void 0,{trim:!0}]]),e("button",{type:"button",class:"get-captcha",disabled:o(n)>0,onClick:b},C(o(f)),9,q)])]),e("div",F,[r(e("input",{type:"checkbox",id:"terms","onUpdate:modelValue":t[4]||(t[4]=a=>M(i)?i.value=a:null)},null,512),[[U,o(i)]]),e("label",J,[t[10]||(t[10]=p("我已阅读并同意")),u(m,{to:"/other/article"},{default:_(()=>t[9]||(t[9]=[p("服务条款")])),_:1,__:[9]})])]),e("button",{class:"auth-button",onClick:g},"注册账号"),e("div",K,[u(m,{to:"/admin/login"},{default:_(()=>t[11]||(t[11]=[p("已有账号？立即登录")])),_:1,__:[11]})])])]),u(w)])}}}),Z=B(P,[["__scopeId","data-v-a7fb3747"]]);export{Z as default};
