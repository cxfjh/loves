import{j as b,p as c,r as y,c as _,a,m as o,s as r,v as n,q as I,o as N,_ as x}from"./Dv50Am8a.js";import{u as h}from"./BfKjuDNB.js";const w={class:"love-form-container"},C={class:"love-form"},T={class:"form-group"},B={class:"file-upload-container"},k={class:"preview-image"},V=["src"],A={class:"form-section"},M={class:"partner-info"},U={class:"partner-avatar"},j={class:"avatar-container"},z={class:"avatar-preview"},F=["src"],O={class:"partner-details"},S={class:"partner-info"},$={class:"partner-avatar"},q={class:"avatar-container"},D={class:"avatar-preview"},E=["src"],J={class:"partner-details"},P={class:"partner-time"},R={class:"form-group"},Y=b({__name:"admin",setup(Z){const{token:m}=c(),g=h(),e=y({bgImg:"",boyImg:"",girlImg:"",boyName:"",girlName:"",startTime:""}),p=()=>Object.values(e.value).every(t=>t.trim()!=="")?e.value.boyName.length>6||e.value.girlName.length>6?(alert("名字长度不能超过6个字符"),!1):!0:(alert("请填写完整信息"),!1),i=async(l,t,s)=>{const d=l.target,u=d.files?.[0];if(u)try{const{base64:v}=await g(u,{maxSizeMB:s});e.value[t]=v}catch{alert("处理图片时出错，请重试")}finally{d.value=""}},f=async()=>{if(!p())return;const l={};m.value&&(l.Authorization=`Bearer ${m.value}`);const{data:t}=await I("/api/private/info",{method:"POST",body:e.value,headers:l,watch:!1},"$M9IARJZ3tY");t.value?.data?.id?(alert("新增信息成功"),e.value={bgImg:"",boyImg:"",girlImg:"",boyName:"",girlName:"",startTime:""}):alert("新增信息失败!")};return(l,t)=>(N(),_("div",w,[a("form",C,[a("div",T,[t[7]||(t[7]=a("label",{for:"bg-image"},"背景图片",-1)),a("div",B,[t[6]||(t[6]=a("label",{for:"bg-image",class:"custom-file-upload"},"选择图片",-1)),a("input",{type:"file",id:"bg-image",onChange:t[0]||(t[0]=s=>i(s,"bgImg",.14)),accept:"image/*"},null,32),a("div",k,[a("img",{src:o(e).bgImg,alt:"背景图片"},null,8,V)])])]),a("div",A,[t[16]||(t[16]=a("h2",null,"个人信息",-1)),a("div",M,[a("div",U,[t[9]||(t[9]=a("label",{for:"boy-avatar"},"男孩头像",-1)),a("div",j,[t[8]||(t[8]=a("label",{for:"boy-avatar",class:"custom-avatar-upload"},"上传头像",-1)),a("input",{type:"file",id:"boy-avatar",onChange:t[1]||(t[1]=s=>i(s,"boyImg",.03)),accept:"image/*"},null,32),a("div",z,[a("img",{src:o(e).boyImg,alt:""},null,8,F)])])]),a("div",O,[t[10]||(t[10]=a("label",{for:"boy-name"},"男孩名字",-1)),r(a("input",{type:"text",id:"boy-name","onUpdate:modelValue":t[2]||(t[2]=s=>o(e).boyName=s),placeholder:"请输入男孩名字",maxlength:"6"},null,512),[[n,o(e).boyName]])])]),a("div",S,[a("div",$,[t[12]||(t[12]=a("label",{for:"girl-avatar"},"女孩头像",-1)),a("div",q,[t[11]||(t[11]=a("label",{for:"girl-avatar",class:"custom-avatar-upload"},"上传头像",-1)),a("input",{type:"file",id:"girl-avatar",onChange:t[3]||(t[3]=s=>i(s,"girlImg",.03)),accept:"image/*"},null,32),a("div",D,[a("img",{src:o(e).girlImg,alt:""},null,8,E)])])]),a("div",J,[t[13]||(t[13]=a("label",{for:"girl-name"},"女孩名字",-1)),r(a("input",{type:"text",id:"girl-name","onUpdate:modelValue":t[4]||(t[4]=s=>o(e).girlName=s),placeholder:"请输入女孩名字",maxlength:"6"},null,512),[[n,o(e).girlName]])])]),a("div",P,[t[15]||(t[15]=a("h2",null,"恋爱时间",-1)),a("div",R,[t[14]||(t[14]=a("label",{for:"love-start-time"},"恋爱开始时间",-1)),r(a("input",{type:"datetime-local",id:"love-start-time","onUpdate:modelValue":t[5]||(t[5]=s=>o(e).startTime=s)},null,512),[[n,o(e).startTime]])])])]),a("div",{class:"form-actions"},[a("button",{type:"button",onClick:f,class:"submit-button"},"保存信息")])])]))}}),K=x(Y,[["__scopeId","data-v-71842907"]]);export{K as default};
